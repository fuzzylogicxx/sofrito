// Starting position is to not break browser defaults, which means:
// 1) all inputs have borders and look like inputs, which is good.
// 2) Webkit search inputs have a special webkit-appearance and cancel (x) button
// 3) Inputs have their own font characteristics – they don’t inherit font styles from root/body. Textarea uses monospace font.
// 4) input type=submit and buttons look pretty much the same (at least in OSX)
// 5) labels and inputs sit inline / adjacent to one another.

// So we’ll leave default form elements as they are to maintain resilience and to reduce conflicts when bringing in 3rd party stuff.
// But we’ll scope some improved form UI inside a custom class.

.form-custom {

  .form-group {
    margin-bottom: $space-xxs;
  }

  // H5BP main.css: Remove default fieldset styles.

  fieldset {
    border: 0;
    margin: 0;
    padding: 0;
  }

  // Some styles for consistency

  input[type=text],
  input[type=email],
  input[type=number],
  input[type=tel],
  .search-widget,
  textarea {
    border: 1px solid $accessible-border-color;
  }

  input[type=text],
  input[type=email],
  input[type=number],
  input[type=tel],
  .search-widget > input[type="search"],
  textarea {
    padding: .5em;
  }

  input[type=text],
  input[type=email],
  textarea,
  .search-widget > input[type="search"] {
    width: 100%;
  }


  // Scott O’Hara’s accessible form components: shared styles
  // https://scottaohara.github.io/a11y_styled_form_controls/src/assets/css/--shared--.css

  /**
   * Shared styling among the different form controls.
   * Much of these styles are pulled from normalize.css.
   * Use as necessary within your own style sheets.
   */

  input,
  button,
  textarea,
  select {
    border-radius: 0; /* may change, but start consistently */
    box-sizing: border-box;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: normal;
    margin: 0;
    overflow: visible; /* show overflow in Edge */
    text-transform: none; /* remove inheritance Edge, Firefox, IE */
  }

  /**
  * Remove the Clear button added by MS browsers
  */
  input::-ms-clear {
    display: none;
    height: 0;
    width: 0;
  }

  /**
  * <button> Focus Normalization:
  * remove FireFox specific inner focus styles.
  * focus style will be reapplied later.
  */
  button::-moz-focus-inner {
    border-style: none;
    padding: 0;
  }


  /**
  * 1. Correct color inheritance in IE
  * 2. Correct the text wrapping in Edge and IE
  */
  legend {
    color: inherit; /* 1 */
    display: table; /* 2 */
    line-height: normal;
    max-width: 100%; /* 2 */
    white-space: normal; /* 2 */
  }

  // H5BP main.css: Allow only vertical resizing of textareas.

  textarea {
    resize: vertical;
  }


  // Scott O’Hara’s Styled Search Component (with minor mods)
  // https://scottaohara.github.io/a11y_styled_form_controls/src/search/

  /**
   * 1. Remove webkit redesign of searches
   *
   * 2. Remove inner padding & search cancel button in Safari & Chrome on
   *    OS X. Safari (but not Chrome) clips the cancel button when the
   *    search input has padding (& `textfield` appearance).
   */
  input[type="search"] {
    -webkit-appearance: none; /* 1 */
  }

  input[type="search"]::-webkit-search-decoration,
  input[type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none; /* 2 */
    appearance: none;
  }

  /**
   * Component Specific Styling
   */
  .search-widget {
    display: block;
    padding-right: 2.5em;
    position: relative;
  }

  .search-widget svg {
    display: block;
  }

  .search-widget > input[type="search"] {
    border: 0;
    border-right: 1px solid #565656;
  }

  .search-widget > [type="submit"] {
    background: #eee;
    border: 0;
    bottom: 0;
    position: absolute;
    right: 0;
    top: 0;
    width: 2.5em;
  }

  .search-widget > input[type="search"]:focus,
  .search-widget > [type="submit"]:not([disabled]):hover,
  .search-widget > [type="submit"]:focus {
    box-shadow: inset 0 0 0 1px #4184F3;
    outline: 1px solid #4184F3;
    outline-offset: 0;
  }

  .search-widget > input[type="search"]:focus {
    border-right-color: #4184F3;
  }

  .search-widget > [type="submit"]:not([disabled]):hover,
  .search-widget > [type="submit"]:focus {
    background: #4184F3;
  }

  .search-widget > [type="submit"]:focus svg,
  .search-widget > [type="submit"]:not([disabled]):hover svg {
    fill: #fff;
  }

  /**
   * Disabled
   */
  .search-widget > [type="search"][disabled],
  .search-widget > [type="submit"][disabled] {
    background: #fafafa;
    cursor: not-allowed;
    opacity: .5;
  }


  @media screen and (-ms-high-contrast: active) {
    .search-widget {
      border: none;
    }

    .search-widget > input[type="search"] {
      border: 1px solid;
      border-right: 1px solid;
      position: relative;
    }

    .search-widget > [type="submit"],
    .search-widget > input[type="search"]:focus {
      z-index: 4;
    }

    .search-widget > [type="submit"]:focus {
      border: 1px solid;
    }

    .search-widget svg {
      fill: #fff;
    }

    .search-widget > [type="search"][disabled],
    .search-widget > [type="submit"][disabled] {
      opacity: .5;
    }
  }

  // Sofrito customisation: just making our custom svg magnifying glass icon, on which we’ve set width:1em, fill its submit button container snugly
  .search-widget svg {
    font-size: 1.5em;
  }



}

